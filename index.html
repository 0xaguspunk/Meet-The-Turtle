<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Meet-the-turtle by armellini13</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Meet-the-turtle</h1>
      <h2 class="project-tagline">AngularJS Spotify Player</h2>
      <a href="https://github.com/armellini13/Meet-The-Turtle" class="btn">View on GitHub</a>
      <a href="https://github.com/armellini13/Meet-The-Turtle/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/armellini13/Meet-The-Turtle/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="meet-the-turtle" class="anchor" href="#meet-the-turtle" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Meet-The-Turtle</h1>

<p><img src="https://cloud.githubusercontent.com/assets/6149085/5714462/6a706f0c-9ac9-11e4-9dc1-be9af4bcc0c4.png" alt="screenshot from 2015-01-13 02 09 46"></p>

<h1>
<a id="tortuga" class="anchor" href="#tortuga" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tortuga</h1>

<p>Tortuga is an AngularJS web app music player that allows you to listen to your favorite songs, create your own playlists and get the best music recommendations. Benefiting from the LastFM, Spotify, SoundCloud, YouTube and The Eco Nest APIs, Tortuga believes in taking the best from each service.</p>

<p>Using angular's material module, Tortuga's UI is implemented following Google's Material Design guidelines. Due to angular-material still being a module in beta phase, Tortuga uses bootstrap to complement functionalities yet not found in this module. </p>

<h1>
<a id="contributors" class="anchor" href="#contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributors</h1>

<ul>
<li>Agustín Armellini Fischer: <a href="mailto:armellini13@gmail.com">armellini13@gmail.com</a>
</li>
<li>Arnau Cebrián: <a href="mailto:arnaucda@gmail.com">arnaucda@gmail.com</a>
</li>
</ul>

<h1>
<a id="libraries-used" class="anchor" href="#libraries-used" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Libraries used</h1>

<p>Tortuga is an AngularJS app, benefiting from the use of third-party modules like <code>angular-material</code>, <code>angular-aria</code>, <code>angular-animate</code>, <code>hammerJS</code>, <code>bootstrap</code> and <code>angular-ui</code> for frontend design and other modules like <code>angular-resource</code>, <code>angular-touch</code> and <code>angular-route</code> for app functionalities.</p>

<h1>
<a id="app-structure" class="anchor" href="#app-structure" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>App structure</h1>

<p>Tortuga's workflow includes using tools like <code>yeoman</code>, <code>bower</code> and <code>grunt</code>. Being generated with yeoman, the app has the following structure which is pretty self-explanatory:</p>

<pre><code>|-app
||-images
||-scripts
|||-controllers
|||-directives
|||-services
|||_app.js
||-styles
||-views
||-index.html
|-bower_components
|-node_modules
|-test
|-bower.json
|-Gruntfile.js
</code></pre>

<h1>
<a id="app-overview" class="anchor" href="#app-overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>App overview</h1>

<p>The app's configuration and URLs definitions are found inside the <code>app.js</code> file inside the scripts folder. </p>

<p>Tortuga has three main views:</p>

<ul>
<li>/starred: where popular tracks from the chosen service are shown.</li>
<li>/player: music player of the app.</li>
<li>/profile: where the user's music is found.</li>
</ul>

<p>Each of these views is changed depending on the URL, which sets the value of the <code>ng-view</code> directive inside of the <code>index.html</code> file. </p>

<h2>
<a id="services" class="anchor" href="#services" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Services</h2>

<p>All the information that the app manages is found through its services. Tortuga has two levels of services: those dependent on the application and those independent on the application.  </p>

<p>The app has to make several calls to different APIs to get information from different songs and update this information inside the playlists of the user. Each API has a service related which will only worry about making the request through angular's <code>$http</code> service and return the response data not caring about the apps format or needed information.</p>

<p>The main services which will care about that will be <code>track</code>, <code>formatTrack</code> and <code>playlist</code>.</p>

<h3>
<a id="track" class="anchor" href="#track" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Track</h3>

<p><code>track</code> is a service that manages the requests to the selected services in order to get the top tracks from LastFM or query a song using Spotify's search engine. Its configuration lets us change the service for the search engine or the top tracks provider pretty easily. </p>

<p>In order to format the responses of the requested songs, <code>track</code> gets injected the <code>formatTrack</code> service which adapts the response to the format defined by the app.</p>

<h3>
<a id="formattrack" class="anchor" href="#formattrack" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>FormatTrack</h3>

<p><code>formatTrack</code> defines a <code>Track</code> object which is used by all the controllers and services from the app when treating with the app's tracks. Each time we create a new API service we generate a function inside <code>formatTrack</code> which translates the response of that API to the one defined.</p>

<div class="highlight highlight-source-js"><pre>  <span class="pl-c">// Track object constructor for the App</span>
    <span class="pl-k">function</span> <span class="pl-en">Track</span> (<span class="pl-smi">name</span>, <span class="pl-smi">artist</span>, <span class="pl-smi">album</span>, <span class="pl-smi">image_small</span>, <span class="pl-smi">image_large</span>, <span class="pl-smi">playcount</span>, <span class="pl-smi">id</span>, <span class="pl-smi">playlist_id</span>) {

      <span class="pl-v">this</span>.<span class="pl-c1">id</span> <span class="pl-k">=</span> id <span class="pl-k">||</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>;
      <span class="pl-v">this</span>.<span class="pl-c1">name</span> <span class="pl-k">=</span> name;
      <span class="pl-v">this</span>.<span class="pl-smi">artist</span> <span class="pl-k">=</span> artist;
      <span class="pl-v">this</span>.<span class="pl-smi">album</span> <span class="pl-k">=</span> album <span class="pl-k">||</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>;
      <span class="pl-v">this</span>.<span class="pl-smi">image_small</span> <span class="pl-k">=</span> image_small <span class="pl-k">||</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>;
      <span class="pl-v">this</span>.<span class="pl-smi">image_large</span> <span class="pl-k">=</span> image_large <span class="pl-k">||</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>;
      <span class="pl-v">this</span>.<span class="pl-smi">playcount</span> <span class="pl-k">=</span> playcount <span class="pl-k">||</span> <span class="pl-k">-</span><span class="pl-c1">1</span>;
      <span class="pl-v">this</span>.<span class="pl-c1">link</span> <span class="pl-k">=</span> <span class="pl-c1">undefined</span>;
      <span class="pl-v">this</span>.<span class="pl-smi">playlist_id</span> <span class="pl-k">=</span> playlist_id <span class="pl-k">||</span> <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>;
    }</pre></div>

<h3>
<a id="playlist" class="anchor" href="#playlist" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Playlist</h3>

<p><code>playlist</code> service takes care of the users playlists; loading the ones previously saved on the server and updating these when necessary. It is also the service that will contain all the information needed to play a track, add it to a list or delete it from another. The app uses indexes from the playlists and tracks array in order to execute any action on them.</p>

<p>For example if we click to add a track from one of our search results, the controller in charge of the search results will send the service the index of the list, the track clicked and the index of the destiny list as parameters of the funciton <code>playlist.addTrackToPlayList</code>. Then the <code>playlist</code> service will only copy the track from the search results list to the selected list.</p>

<h2>
<a id="views-and-controllers" class="anchor" href="#views-and-controllers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Views and controllers</h2>

<h3>
<a id="popular-tracks" class="anchor" href="#popular-tracks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Popular tracks</h3>

<p>The /starred URL provides us a list of the most popular songs from LastFM. The controller in charge of this view is the <code>StarredCtrl</code>. <code>StarredCtrl</code> will have the <code>track</code> service injected in order to request the top tracks of a particular provider. </p>

<p>The controller will call <code>track.getTopTracks</code>, then inside this function track will call the selected API service and catch the response. Once recieved and before returning it back to the controller, <code>track</code> will call the correspondent <code>formatTrack</code> function in order to translate the response so the controller doesn't have to worry about the response format being able to just display the information using Tortuga's format.</p>

<p><img src="https://cloud.githubusercontent.com/assets/6149085/5714474/ad1e5a94-9ac9-11e4-8970-66ed044c63f4.png" alt="image"></p>

<h3>
<a id="search-bar" class="anchor" href="#search-bar" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Search bar</h3>

<p>The search bar is located on the header inside <code>header.html</code> and controlled by <code>SearchCtrl</code>. Again follows the same flow as popular tracks to request data.</p>

<p><img src="https://cloud.githubusercontent.com/assets/6149085/5714491/f84d0ee8-9ac9-11e4-8b6b-22a6612a9a34.png" alt="screenshot from 2015-01-13 02 14 02"></p>

<h3>
<a id="add-track-" class="anchor" href="#add-track-" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Add Track ###</h3>

<p><code>AddTrackCtrl</code> is a specific controller which inside a list of tracks allows you to add a track to a list using the <code>playlist</code> service.</p>

<p><img src="https://cloud.githubusercontent.com/assets/6149085/5714501/2afb4f30-9aca-11e4-8026-eea4c7d109f8.png" alt="image">
<img src="https://cloud.githubusercontent.com/assets/6149085/5714527/cc6785d2-9aca-11e4-88b6-c31b199ad2fd.png" alt="screenshot from 2015-01-13 02 16 38"></p>

<h3>
<a id="profile" class="anchor" href="#profile" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Profile</h3>

<p>Profile follows the same pattern as starred but instead of displaying information from LastFM, displays the playlists from the user and allows you to create and modify new playlists.</p>

<p><img src="https://cloud.githubusercontent.com/assets/6149085/5714552/15dbb102-9acb-11e4-8121-378542b980a0.png" alt="screenshot from 2015-01-13 02 22 14">
<img src="https://cloud.githubusercontent.com/assets/6149085/5714560/3108de50-9acb-11e4-8892-49c3e2a4f605.png" alt="screenshot from 2015-01-13 02 22 38"></p>

<h2>
<a id="music-player" class="anchor" href="#music-player" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Music Player</h2>

<p>Tortuga's player uses the <code>playerLogic</code> service and <code>PlayTrackCtrl</code> and <code>PlayerCtrl</code> controllers. <code>playerLogic</code> is one of the simplest services of all, the only information that has is the index of the playing song and the index of its playlist. Then the <code>PlayerCtrl</code> controller uses angular's <code>$watch</code> service to see when the song has changed and takes care of requesting the next song and playing it as well as letting the user change of song or pause the song.</p>

<p><img src="https://cloud.githubusercontent.com/assets/6149085/5714596/a03e5ffc-9acb-11e4-969b-095e160b1e5c.png" alt="screenshot from 2015-01-13 02 24 34">
<img src="https://cloud.githubusercontent.com/assets/6149085/5714601/a9b9d7c8-9acb-11e4-8fc8-77fd63834190.png" alt="screenshot from 2015-01-13 02 25 43"></p>

<p><code>PlayTrackCtrl</code> simply works as <code>AddTrackCtrl</code> although it modifies the indexes of the playerLogic service each time a song is clicked.</p>

<h3>
<a id="youtube-directive" class="anchor" href="#youtube-directive" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>YouTube directive</h3>

<p>Tortuga has a YouTube directive which uses the YouTube javascript API to control the embedded videos. These are hidden in order to create a more streaming service look. Through angular's <code>$broadcast</code> service the <code>PlayerCtrl</code> controller is able to change the video (song) playing, play it and pause it. </p>

<pre><code>&lt;youtube&gt; ... &lt;/youtube&gt;
</code></pre>

<h2>
<a id="recommendations" class="anchor" href="#recommendations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Recommendations</h2>

<p>Tortuga also lets you get awesome recommendations from The Eco Nest API. Each time a song is played, the <code>recommendations</code> service is alerted and therefore makes a request to The Eco Nest asking for related artists to the 5 last played. These results can be seen inside the /profile view.</p>

<p><img src="https://cloud.githubusercontent.com/assets/6149085/5714630/fe63bf46-9acb-11e4-8758-f62f71256f40.png" alt="screenshot from 2015-01-13 02 29 16"></p>

<h3>
<a id="set-up" class="anchor" href="#set-up" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Set Up</h3>

<p>To set up the app, clone the repository and execute <code>bower install</code> and <code>grunt serve</code>. The backend is still under development. Right now Tortuga uses a public API found in <a href="https://github.com/raulmoron/vmhipermedia">https://github.com/raulmoron/vmhipermedia</a>, but our intention is to develop our own with Node.js and MongoDB.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/armellini13/Meet-The-Turtle">Meet-the-turtle</a> is maintained by <a href="https://github.com/armellini13">armellini13</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
